library(lwnnr)
library(readxl)
library(xlsx)
current_data <- load_salaries() %>%
add_fangraph_ids() %>%
add_current_reduced()
current_data <- load_salaries() %>%
add_fangraph_ids() %>%
add_current_season_reduced()
library(dplyr)
library(tidyr)
library(stringr)
library(lwnnr)
library(readxl)
library(xlsx)
library(baseballr)
current_data <- load_salaries() %>%
add_fangraph_ids() %>%
add_current_season_reduced()
library(dplyr)
library(tidyr)
library(stringr)
library(lwnnr)
library(readxl)
library(xlsx)
library(baseballr)
library(xml2)
library(rvest)
current_data <- load_salaries() %>%
add_fangraph_ids() %>%
add_current_season_reduced()
View(current_data)
best_current_hitter <- current_data %>%
filter(lwnn == 1 & !is.na(wOBA_2019)) %>%
select(team,wOBA_2019) %>%
arrange(wOBA_2019)
View(best_current_hitter)
best_current_hitter <- current_data %>%
filter(lwnn == 1 & !is.na(wOBA_2019)) %>%
select(team,name,wOBA_2019) %>%
arrange(wOBA_2019
View(best_current_hitter)
best_current_hitter <- current_data %>%
filter(lwnn == 1 & !is.na(wOBA_2019)) %>%
select(team,name,wOBA_2019) %>%
arrange(wOBA_2019)
View(best_current_hitter)
best_current_hitter <- current_data %>%
filter(lwnn == 1 & !is.na(wOBA_2019) & PA>30) %>%
select(team,name,wOBA_2019,PA) %>%
arrange(-wOBA_2019)
best_current_hitter <- current_data %>%
filter(lwnn == 1 & !is.na(wOBA_2019) & PA>30) %>%
select(team,name,wOBA_2019,PA_2019) %>%
arrange(-wOBA_2019)
best_current_hitter <- current_data %>%
filter(lwnn == 1 & !is.na(wOBA_2019) & PA_2019>30) %>%
select(team,name,wOBA_2019,PA_2019) %>%
arrange(-wOBA_2019)
best_current_hitter <- current_data %>%
filter(lwnn == 1 & !is.na(wOBA_2019) & PA_2019>30) %>%
select(team,name,wOBA_2019,PA_2019,Team_2019) %>%
arrange(-wOBA_2019) %>%
group_by(team) %>%
mutate(best_hitter=row_number()) %>%
filter(best_hitter==1)
write.csv(best_current_hitter,file="F:/Documents/LWNN/best_hitter.csv",row.names=FALSE)
library(dplyr)
library(tidyr)
library(stringr)
library(lwnnr)
library(readxl)
library(xlsx)
library(baseballr)
library(xml2)
library(rvest)
lwnn_basic_dmb_output("F:/Documents/LWNN/dmb.xlsx")
lwnn_basic_dmb_output("F:/Documents/LWNN/dmb.xlsx")
library(dplyr)
library(tidyr)
library(stringr)
library(lwnnr)
library(readxl)
library(xlsx)
library(baseballr)
library(xml2)
library(rvest)
lwnn_basic_dmb_output("F:/Documents/LWNN/dmb.xlsx")
library(dplyr)
library(tidyr)
library(stringr)
library(lwnnr)
library(readxl)
library(xlsx)
library(baseballr)
library(xml2)
library(rvest)
lwnn_basic_dmb_output("F:/Documents/LWNN/dmb.xlsx")
library(dplyr)
library(tidyr)
library(stringr)
library(lwnnr)
library(readxl)
library(xlsx)
library(baseballr)
library(xml2)
library(rvest)
payload <- read_html("http://www.milb.com/milb/stats/stats.jsp?t=l_trn&lid=122&sid=l122")
View(payload)
leaders <- payload %>%
html_nodes("table")
View(leaders)
Sys.Date()
library("devtools")
document()
library(lwnnr)
update_current_year_stats()
hitters_minors <- read.csv("F:/Documents/LWNN/fangraphs/hitters_minors.csv",stringsAsFactors = FALSE) %>%
rename(Team_2019 = Team,
fangraph_id=playerid,
wOBA_2019=wOBA,
PA_2019=PA) %>%
select(fangraph_id,Team_2019,PA_2019,wOBA_2019) %>%
mutate(type="hitter")
hitters_mlb <- read.csv("F:/Documents/LWNN/fangraphs/hitters_mlb.csv",stringsAsFactors = FALSE) %>%
rename(wOBA_2019 = wOBA,
PA_2019 = PA,
Team_2019 = Team) %>%
mutate(fangraph_id=as.character(playerid)) %>%
select(fangraph_id,Team_2019,PA_2019,wOBA_2019) %>%
mutate(type="hitter")
pitchers_minors <- read.csv("F:/Documents/LWNN/fangraphs/pitchers_minors.csv",stringsAsFactors = FALSE) %>%
rename(FIP_2019 = FIP,
IP_2019 = IP,
Team_2019 = Team,
fangraph_id=playerid) %>%
select(fangraph_id,Team_2019,IP_2019,FIP_2019) %>%
mutate(type="pitcher")
pitchers_mlb <- read.csv("F:/Documents/LWNN/fangraphs/pitchers_mlb.csv",stringsAsFactors = FALSE) %>%
rename(FIP_2019 = FIP,
IP_2019 = IP,
Team_2019 = Team) %>%
mutate(fangraph_id=as.character(playerid)) %>%
select(fangraph_id,Team_2019,IP_2019,FIP_2019) %>%
mutate(type="pitcher")
current_season <- coalesce_join(hitters_mlb,pitchers_mlb,by="fangraph_id") %>%
coalesce_join(hitters_minors,by="fangraph_id") %>%
coalesce_join(pitchers_minors,by="fangraph_id")
View(current_season)
library(lwnnr)
library(dplyr)
library(tidyr)
library(stringr)
library(lwnnr)
library(readxl)
library(xlsx)
library(baseballr)
library(xml2)
library(rvest)
lwnn_basic_dmb_output("F:/Documents/LWNN/dmb.xlsx")
hitters_minors <- read.csv("F:/Documents/LWNN/fangraphs/hitters_minors.csv",stringsAsFactors = FALSE) %>%
rename(Team_2019 = Team,
fangraph_id=playerid,
wOBA_2019=wOBA,
PA_2019=PA) %>%
select(fangraph_id,Team_2019,PA_2019,wOBA_2019) %>%
mutate(type="hitter",level="minors")
hitters_mlb <- read.csv("F:/Documents/LWNN/fangraphs/hitters_mlb.csv",stringsAsFactors = FALSE) %>%
rename(wOBA_2019 = wOBA,
PA_2019 = PA,
Team_2019 = Team) %>%
mutate(fangraph_id=as.character(playerid)) %>%
select(fangraph_id,Team_2019,PA_2019,wOBA_2019) %>%
mutate(type="hitter",level="mlb")
pitchers_minors <- read.csv("F:/Documents/LWNN/fangraphs/pitchers_minors.csv",stringsAsFactors = FALSE) %>%
rename(FIP_2019 = FIP,
IP_2019 = IP,
Team_2019 = Team,
fangraph_id=playerid) %>%
select(fangraph_id,Team_2019,IP_2019,FIP_2019) %>%
mutate(type="pitcher",level="minors")
pitchers_mlb <- read.csv("F:/Documents/LWNN/fangraphs/pitchers_mlb.csv",stringsAsFactors = FALSE) %>%
rename(FIP_2019 = FIP,
IP_2019 = IP,
Team_2019 = Team) %>%
mutate(fangraph_id=as.character(playerid)) %>%
select(fangraph_id,Team_2019,IP_2019,FIP_2019) %>%
mutate(type="pitcher",level="mlb")
current_season <- coalesce_join(hitters_mlb,pitchers_mlb,by="fangraph_id") %>%
coalesce_join(hitters_minors,by="fangraph_id") %>%
coalesce_join(pitchers_minors,by="fangraph_id")
lwnn_basic_output <- load_salaries() %>%
add_fangraph_ids() %>%
add_dmb() %>%
add_prospects() %>%
add_zips_reduced() %>%
add_current_season_reduced() %>%
mutate(team=case_when(is.na(team)~"Free Agent",
TRUE~team),
wOBA_2019=round(wOBA_2019,digits = 3),
FIP_2019=round(FIP_2019,digits=2)) %>%
filter(lwnn==1 | dmb==1)
lwnn_basic_output <- load_salaries() %>%
add_fangraph_ids() %>%
add_dmb() %>%
add_prospects() %>%
add_zips_reduced()
lwnn_basic_output <- load_salaries() %>%
add_fangraph_ids() %>%
add_dmb() %>%
add_prospects()
lwnn_basic_output <- load_salaries() %>%
add_fangraph_ids() %>%
add_dmb()
lwnn_basic_output <- load_salaries() %>%
add_fangraph_ids()
mlb_hitters_ids <- read.csv("F:/Documents/LWNN/fangraphs/hitters_mlb.csv",stringsAsFactors = FALSE) %>%
rename(name=Name) %>%
mutate(fangraph_id=as.character(playerid)) %>%
distinct(fangraph_id,name)
mlb_pitchers_ids <- read.csv("F:/Documents/LWNN/fangraphs/pitchers_mlb.csv",stringsAsFactors = FALSE) %>%
rename(name=Name) %>%
mutate(fangraph_id=as.character(playerid)) %>%
distinct(fangraph_id,name)
minors_hitters_ids <- read.csv("F:/Documents/LWNN/fangraphs/hitters_minors.csv",stringsAsFactors = FALSE) %>%
rename(name=Name,fangraph_id=playerid) %>%
distinct(name,fangraph_id)
minors_pitchers_ids <- read.csv("F:/Documents/LWNN/fangraphs/pitchers_minors.csv",stringsAsFactors = FALSE) %>%
rename(name=Name,fangraph_id=playerid) %>%
distinct(name,fangraph_id)
library(lwnnr)
lwnn_basic_dmb_output("F:/Documents/LWNN/dmb.xlsx")
library(dplyr)
library(tidyr)
library(stringr)
library(lwnnr)
library(readxl)
library(xlsx)
library(baseballr)
library(xml2)
library(rvest)
update_current_year_stats()
lwnn_basic_dmb_output("F:/Documents/LWNN/dmb.xlsx")
library(dplyr)
library(tidyr)
library(stringr)
library(lwnnr)
library(readxl)
library(xlsx)
library(baseballr)
library(xml2)
library(rvest)
# Worst current hitter
worst_current_hitter <- load_salaries() %>%
add_fangraph_ids() %>%
add_current_season_reduced() %>%
filter(lwnn == 1 & !is.na(wOBA_2019) & PA_2019>30) %>%
select(team,name,wOBA_2019,PA_2019,Team_2019) %>%
arrange(wOBA_2019) %>%
group_by(team) %>%
mutate(worst_hitter=row_number()) %>%
filter(worst_hitter==1)
write.csv(worst_current_hitter,file="F:/Documents/LWNN/worst_hitter.csv",row.names=FALSE)
lwnn_basic_output <- load_salaries() %>%
add_fangraph_ids() %>%
add_dmb() %>%
add_prospects() %>%
add_zips_reduced() %>%
add_current_season_reduced() %>%
mutate(team=case_when(is.na(team)~"Free Agent",
TRUE~team),
wOBA_2019=round(wOBA_2019,digits = 3),
FIP_2019=round(FIP_2019,digits=2))
View(lwnn_basic_output)
unsigned_minors <- load_salaries() %>%
add_fangraph_ids() %>%
add_dmb() %>%
add_prospects() %>%
add_zips_reduced() %>%
add_current_season_reduced() %>%
mutate(team=case_when(is.na(team)~"Free Agent",
TRUE~team),
wOBA_2019=round(wOBA_2019,digits = 3),
FIP_2019=round(FIP_2019,digits=2)) %>%
filter(lwnn==0 & level=="minors")
unsigned_minors <- load_salaries() %>%
add_fangraph_ids() %>%
add_dmb() %>%
add_prospects() %>%
add_zips_reduced() %>%
add_current_season_reduced() %>%
mutate(team=case_when(is.na(team)~"Free Agent",
TRUE~team),
wOBA_2019=round(wOBA_2019,digits = 3),
FIP_2019=round(FIP_2019,digits=2)) %>%
filter(is.na(lwnn) & level=="minors")
unsigned <- load_salaries() %>%
add_fangraph_ids() %>%
add_dmb() %>%
add_prospects() %>%
add_zips_reduced() %>%
add_current_season_reduced() %>%
mutate(team=case_when(is.na(team)~"Free Agent",
TRUE~team),
wOBA_2019=round(wOBA_2019,digits = 3),
FIP_2019=round(FIP_2019,digits=2)) %>%
filter(is.na(lwnn) & level=="minors")
unsigned <- load_salaries() %>%
add_fangraph_ids() %>%
add_dmb() %>%
add_prospects() %>%
add_zips_reduced() %>%
add_current_season_reduced() %>%
mutate(team=case_when(is.na(team)~"Free Agent",
TRUE~team),
wOBA_2019=round(wOBA_2019,digits = 3),
FIP_2019=round(FIP_2019,digits=2)) %>%
filter(is.na(lwnn))
lwnn_no_data <- unsigned %>%
filter(is.na(type)) %>%
select(name,team,salary_2019) %>%
distinct()
library("devtools")
document()
library(lwnnr)
output_unsigned("F:/Documents/LWNN/unsigned.xlsx")
document()
document()
output_unsigned("F:/Documents/LWNN/unsigned.xlsx")
library(lwnnr)
output_unsigned("F:/Documents/LWNN/unsigned.xlsx")
output_unsigned("F:/Documents/LWNN/unsigned.xlsx")
library(lwnnr)
output_unsigned("F:/Documents/LWNN/unsigned.xlsx")
hitters_minors <- read.csv("F:/Documents/LWNN/fangraphs/hitters_minors.csv",stringsAsFactors = FALSE) %>%
rename(Team_2019 = Team,
fangraph_id=playerid,
wOBA_2019=wOBA,
PA_2019=PA,
name=Name) %>%
select(fangraph_id,Team_2019,PA_2019,wOBA_2019) %>%
mutate(type="hitter",level="minors")
hitters_mlb <- read.csv("F:/Documents/LWNN/fangraphs/hitters_mlb.csv",stringsAsFactors = FALSE) %>%
rename(wOBA_2019 = wOBA,
PA_2019 = PA,
Team_2019 = Team,
name=Name) %>%
mutate(fangraph_id=as.character(playerid)) %>%
select(fangraph_id,name,Team_2019,PA_2019,wOBA_2019) %>%
mutate(type="hitter",level="mlb")
pitchers_minors <- read.csv("F:/Documents/LWNN/fangraphs/pitchers_minors.csv",stringsAsFactors = FALSE) %>%
rename(FIP_2019 = FIP,
IP_2019 = IP,
Team_2019 = Team,
fangraph_id=playerid,
name=Name) %>%
select(fangraph_id,name,Team_2019,IP_2019,FIP_2019) %>%
mutate(type="pitcher",level="minors")
pitchers_mlb <- read.csv("F:/Documents/LWNN/fangraphs/pitchers_mlb.csv",stringsAsFactors = FALSE) %>%
rename(FIP_2019 = FIP,
IP_2019 = IP,
Team_2019 = Team,
name=Name) %>%
mutate(fangraph_id=as.character(playerid)) %>%
select(fangraph_id,name,Team_2019,IP_2019,FIP_2019) %>%
mutate(type="pitcher",level="mlb")
library(lwnnr)
output_unsigned("F:/Documents/LWNN/unsigned.xlsx")
library(dplyr)
library(tidyr)
library(stringr)
library(lwnnr)
library(readxl)
library(xlsx)
library(baseballr)
library(xml2)
library(rvest)
update_current_year_stats()
output_lwnn_basic_dmb("F:/Documents/LWNN/dmb.xlsx")
output_unsigned("F:/Documents/LWNN/unsigned.xlsx")
mlb_draft_2019 <- read.csv("F:/Documents/LWNN/fangraphs/mlb_draft_2018.csv",stringsAsFactors = FALSE)
View(mlb_draft_2019)
mlb_draft_2019 <- read.csv("F:/Documents/LWNN/fangraphs/mlb_draft_2018.csv",stringsAsFactors = FALSE) %>%
filter(PLAYER!="")
mlb_draft_2019 <- read.csv("F:/Documents/LWNN/fangraphs/mlb_draft_2018.csv",stringsAsFactors = FALSE) %>%
filter(PLAYER!="",
SIGNING.BONUS!="",
SIGNING.BONUS!="--")
mlb_draft_2019 <- read.csv("F:/Documents/LWNN/fangraphs/mlb_draft_2018.csv",stringsAsFactors = FALSE) %>%
filter(PLAYER!="",
SIGNING.BONUS!="",
SIGNING.BONUS!="--") %>%
separate(PLAYER,c("last_name","first_name"),sep=", ") %>%
mutate(name=str_c(first_name,last_name,sep=" "))
View(mlb_draft_2019)
mlb_draft_2019 <- read.csv("F:/Documents/LWNN/fangraphs/mlb_draft_2018.csv",stringsAsFactors = FALSE) %>%
filter(PLAYER!="",
SIGNING.BONUS!="",
SIGNING.BONUS!="--") %>%
separate(PLAYER,c("last_name","first_name"),sep=", ") %>%
mutate(name=str_c(first_name,last_name,sep=" "),
draft_pick=paste0(RD,".",PICK)) %>%
add_fangraph_ids()
View(mlb_draft_2019)
library("devtools")
document()
library(lwnnr)
output_lwnn_basic_dmb("F:/Documents/LWNN/dmb.xlsx")
output_unsigned("F:/Documents/LWNN/unsigned.xlsx")
library(dplyr)
library(tidyr)
library(stringr)
library(lwnnr)
library(readxl)
library(xlsx)
library(baseballr)
library(xml2)
library(rvest)
output_lwnn_basic_dmb("F:/Documents/LWNN/dmb.xlsx")
output_unsigned("F:/Documents/LWNN/unsigned.xlsx")
library(lwnnr)
output_lwnn_basic_dmb("F:/Documents/LWNN/dmb.xlsx")
output_unsigned("F:/Documents/LWNN/unsigned.xlsx")
output_lwnn_basic_dmb("F:/Documents/LWNN/dmb.xlsx")
output_unsigned("F:/Documents/LWNN/unsigned.xlsx")
library(lwnnr)
output_lwnn_basic_dmb("F:/Documents/LWNN/dmb.xlsx")
output_unsigned("F:/Documents/LWNN/unsigned.xlsx")
library(lwnnr)
update_current_year_stats()
output_lwnn_basic_dmb("F:/Documents/LWNN/dmb.xlsx")
output_unsigned("F:/Documents/LWNN/unsigned.xlsx")
library(dplyr)
library(tidyr)
library(stringr)
library(lwnnr)
library(readxl)
library(xlsx)
library(baseballr)
library(xml2)
library(rvest)
update_current_year_stats()
output_lwnn_basic_dmb("F:/Documents/LWNN/dmb.xlsx")
output_unsigned("F:/Documents/LWNN/unsigned.xlsx")
dmb_pitchers <- read.csv("F:/Documents/LWNN/dmb/pitchers_fmt.csv",stringsAsFactors = FALSE) %>%
filter(!is.na(fangraph_id)) %>%
mutate(POS=case_when(!is.na(ST)~"SP",
TRUE~"RP")) %>%
rename(OPS_LHB=OPS,
OPS_RHB=OPS.1,
STA_SP=ST,
STA_RP=REL) %>%
select(name,Age,T,POS,IP,ERA,G.GF,OPS_LHB,OPS_RHB,STA_SP,STA_RP,fangraph_id) %>%
mutate(type="pitcher")
View(dmb_pitchers)
dmb_hitters <- read.csv("F:/Documents/LWNN/dmb/hitters_fmt.csv",stringsAsFactors = FALSE) %>%
filter(!is.na(fangraph_id)) %>%
mutate(OPS_LHP=OBP.1+SLG.1,
OPS_RHP=OBP.2+SLG.2,
POS=paste0(ifelse(!is.na(C.RN),"CA/",""),
ifelse(!is.na(X1B.RN),"1B/",""),
ifelse(!is.na(X2B.RN),"2B/",""),
ifelse(!is.na(X3B.RN),"3B/",""),
ifelse(!is.na(SS.RN),"SS/",""),
ifelse(!is.na(LF.RN),"LF/",""),
ifelse(!is.na(CF.RN),"CF/",""),
ifelse(!is.na(RF.RN),"RF/","")
)) %>%
mutate(POS=str_replace(POS,"/$","")) %>%
select(name,Age,POS,AB,OBP,SLG,STL,OPS_LHP,OPS_RHP,X1B.RN,X1B.ER,X2B.RN,X2B.ER,X3B.RN,X3B.ER,SS.RN,SS.ER,LF.RN,LF.ER,CF.RN,CF.ER,RF.RN,RF.ER,OF.ARM,C.RN,C.ER,C.ARM,PB,fangraph_id) %>%
mutate(type="hitter")
View(dmb_hitters)
library(lwnnr)
output_lwnn_basic_dmb("F:/Documents/LWNN/dmb.xlsx")
output_unsigned("F:/Documents/LWNN/unsigned.xlsx")
library(dplyr)
library(tidyr)
library(stringr)
library(lwnnr)
library(readxl)
library(xlsx)
library(baseballr)
library(xml2)
library(rvest)
update_current_year_stats()
#update_current_year_stats()
output_lwnn_basic_dmb("F:/Documents/LWNN/dmb.xlsx")
output_unsigned("F:/Documents/LWNN/unsigned.xlsx")
library(dplyr)
library(tidyr)
library(stringr)
library(lwnnr)
library(readxl)
library(xlsx)
library(baseballr)
library(xml2)
library(rvest)
update_current_year_stats()
output_lwnn_basic_dmb("F:/Documents/LWNN/dmb.xlsx")
output_unsigned("F:/Documents/LWNN/unsigned.xlsx")
library(dplyr)
library(tidyr)
library(stringr)
library(lwnnr)
library(readxl)
library(xlsx)
library(baseballr)
library(xml2)
library(rvest)
library("devtools")
document()
library(lwnnr)
